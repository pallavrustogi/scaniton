<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>ScanItOn | Creat your QR Code</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <!-- Le styles -->
    <!-- TODO: make sure bootstrap.min.css points to BootTheme generated file
        -->
    <link href="css/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <style type="text/css">
        body {
            padding-top: 60px;
            padding-bottom: 40px;
        }
        .sidebar-nav {
            padding: 9px 0;
        }
    </style>
    <!-- TODO: make sure bootstrap-responsive.min.css points to BootTheme
        generated file -->
    <link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-responsive.min.css" rel="stylesheet">
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
            <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
    <!-- Fav and touch icons -->
    <link rel="shortcut icon" href="../assets/ico/favicon.ico">
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../assets/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../assets/ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../assets/ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="../assets/ico/apple-touch-icon-57-precomposed.png">
	<script src="http://www.parsecdn.com/js/parse-1.2.12.min.js"></script>
	
</head>

<body>
    <div class="navbar navbar-fixed-top">
        <div class="navbar-inner">
            <div class="container-fluid">
                <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse"> <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>

                </a>
                <a class="brand" href="http://www.scaniton.com" style="padding-top:5px;padding-bottom:0px;"><img src="img/logo.png" width="140px" height="37px"/></a>
                <div class="nav-collapse collapse">

                    <p class="navbar-text pull-right" style="padding-left:10px;"> 
                        <input id="logout"  class="btn btn-success" type="submit" value="Logout" style="margin-top:0px;"/>
                    </p>
                    <p class="navbar-text pull-right" style="padding-left:10px;">Logged in as
                        <a id="user" href="#" class="navbar-link">Username</a>
                    </p>
                    <ul class="nav pull-right">
                        <li class="active">
                            <a href="profile.html">Create</a>
                        </li>
                        <li>
                            <a href="track.html">Track</a>
                        </li>
                        <li>
                            <a href="index.html#Contact">Contact</a>
                        </li>
                    </ul>
                </div>
                <!--/.nav-collapse -->
            </div>
        </div>
    </div>
    <div class="container-fluid">
        <div class="row-fluid">
            <div class="span3">
                <div class="well sidebar-nav">
                    <ul class="nav nav-list">
                        <li class="nav-header">To Do</li>
                        <li class="active">
                            <a href="#">Create New</a>
                        </li>
                        <li>
                            <a href="track.html">Track Packages</a>
                        </li>
                        <li>
                            <a href="#"></a>
                        </li>

                    </ul>
                </div>
                <!--/.well -->
            </div>
            <!--/span-->
            <div class="span9">
                <div class="hero-unit">
                    <h1>Step 1</h1>

                    <p>Click here to create a QR Code</p>
                    <p class="">
                        <a id="generate" class="btn btn-primary btn-large">Generate QR »</a> <div id="qrcode"></div>
                    </p>
                    <h1>Step 2</h1>
                    <p>Click here to print QR Code</p>
                    <p class="">
                        <a id="print" class="btn btn-primary btn-large">Print QR »</a>
                    </p>
                    <h1>Step 3</h1>
                    <p>Slip it in your package</p>

                </div>

                <!--/row-->
            </div>
            <!--/span-->
        </div>
        <!--/row-->
        <hr>
        <footer>
            <p>© Scaniton 2013. QR Code is a registered trademark of DENSO WAVE INCORPORATED
            </p>
        </footer>
    </div>
    <!--/.fluid-container-->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js">
    </script>
    <script src="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
	<script type="text/javascript" src="jquery.qrcode.min.js"></script>
	<script type="text/javascript">
		Parse.initialize("SN9RAjbHn5ofcwqjshAYG0jRZnxQrMgZ6Xj3rJWh", "HX9VdqSqHXGxBQqXMBFBCASVLUiWrkAC2WPI1Pcb");
</script>
<script type = "text/javascript">
	$(document).ready(function(){
				var currentUser = Parse.User.current();
				if (currentUser) {
				console.log(currentUser.attributes.full_name);
				$("#user").html(currentUser.attributes.full_name);
				}else
				{console.log("no user");}
			});
	</script>
	<script type = "text/javascript">
	$(document).ready(function(){
				$('#generate').click(function() {
				$('#qrcode').html("");
					var QrCode = Parse.Object.extend("qr_url");
					var qrcode = new QrCode();
					var currentUser = Parse.User.current();
					qrcode.set("createdBy", currentUser);						 
					qrcode.save(null, {
					  success: function(qrcode) {
						// Execute any logic that should take place after the object is saved.
						//alert('New object created with objectId: ' + qrcode.id);
						$('#qrcode').qrcode("http://www.scaniton.com/scan.html?id=" + qrcode.id);
					  },
					  error: function(qrcode, error) {
						// Execute any logic that should take place if the save fails.
						// error is a Parse.Error with an error code and description.
						//alert('Failed to create new object, with error code: ' + error.description);
					  }
					});
					
				});
			});
	</script>
	<script>
	$(function(){
  $('#print').click(function(){
    
	var dataUrl = document.getElementById("qr").toDataURL()
	var windowContent = '<!DOCTYPE html>';
    windowContent += '<html>'
    windowContent += '<head><title>Scaniton</title></head>';
    windowContent += '<body>'
    windowContent += '<img src="' + dataUrl + '">';
    windowContent += '</body>';
    windowContent += '</html>';
	printMe=window.open();
    printMe.document.write(windowContent);
    printMe.print();
    printMe.close();
  });
});

    $(document).ready(function(){
                $('#logout').click(function() {
                    Parse.User.logOut();
                    window.location.href="http://scaniton.com"
                });
            });

	</script>
</body>

</html>